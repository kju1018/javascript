<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Insert title here</title>
		<link rel="stylesheet" href="/WebContent/common/bootstrap-4.6.0/css/bootstrap.min.css">
		<script src="/WebContent/common/js/jquery-3.5.1.min.js"></script>
		<script src="/WebContent/common/bootstrap-4.6.0/js/bootstrap.bundle.min.js"></script>	
		<script src="/WebContent/common/bootstrap-4.6.0/js/bootstrap.min.js"></script>
		<script>
			// var obj = {};
			// obj.name = "홍길동";
			// console.log(obj.name);

			// var fun = function() {}; //함수객체
			// fun.name2 = "홍길동2";
			// console.log(fun.name2);
			//var jQuery = function() {...}
			//var $ = jQuery
			//jQuery는 함수객체
			//jQuery.ajax( url [, settings ] )
			//[settings]은 생략가능
			//PlainObject로 되어있으면 {..} 이렇게 만들어서 줘야함 {property:value, peoperty:function(){}}

			const handleClick1 = () => {
				$.ajax({ url: "exam04_ajax_data1.json", method="post"})
				.done((data) => {
					const htmlFragment = `
					<div>
						<table class="table table-bordered">
							<tr class="bg-primary">
								<th>bno</th>
								<th>btitle</th>
								<th>bcontent</th>
								<th>bwriter</th>
								<th>bdate</th>
								<th>bhitcount</th>
							</tr>
							<tr>
								<td>${data.bno}</td>
								<td>${data.btitle}</td>
								<td>${data.bcontent}</td>
								<td>${data.bwriter}</td>
								<td>${data.bdate}</td>
								<td>${data.bhitcount}</td>
							</tr>
						</table>
					</div>
					`;
					$("#content").html(htmlFragment);
				})
				.fail((error) => {
					console.log("에러발생!")
					console.log(error);
				})
				.always(() => {
					console.log("마무리");
				});
				//~
			};

			const handleClick2 = () => {
				$.ajax({ url: "exam04_ajax_data2.html"})
				.done((data) => {
					$("#content").html(data);
				})
				.fail((error) => {
					if(error.status === 404){
						$("#content").html("요청 자료가 없습니다.");
					}
					console.log(error);
				})
				.always(() => {
					console.log("마무리");
				});
				//~
			}
		</script>
	
	</head>
	<body>
		<div class="card">
			<div class="card-header">
				jQuery를 이용한 Ajax
			</div>
			<div class="card-body">
				<a class="btn btn-success btn-sm" href="javascript:handleClick1()">AJAX 통신</a>

				<a class="btn btn-success btn-sm" href="javascript:handleClick2()">AJAX 통신</a>
				<hr/>
				<div id="content">
		
				</div>
			</div>
	
		</div>
	</body>
</html>
